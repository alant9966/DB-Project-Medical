<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Doctor Appointments</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/doctor/appointments.css') }}">
    <script src="https://kit.fontawesome.com/12ffe3020f.js" crossorigin="anonymous"></script>
</head>
<body>
    <header class="header-bar">
        <div class="header-left">
            <div class="logo">Company Logo</div>
        </div>
        <a class="logout-button" href="{{ url_for('logout') }}">Log Out</a>
    </header>

    <div class="homepage-container">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href={{ url_for('doctor_home') }}>
                            <i class="fa-solid fa-user"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href={{ url_for('doctor_appointments') }} class="active">
                            <i class="fa-solid fa-calendar"></i>
                            <span>Appointments</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main">
            <!-- PAGE TITLE -->
            <h1 class="page-title">Appointments</h1>
            <div class="section-divider"></div>
            <div class="appointment-container">
                <!-- LEFT COLUMN: DATE + APPOINTMENT LIST -->
                <div class="time-list-box">
                    <!-- Date Selector -->
                    <div class="date-box">
                        <form method="GET" id="date-form">
                            <input type="date"
                                   name="date"
                                   value="{{ selected_date }}"
                                   class="date-input"
                                   id="date-input"
                                   onchange="document.getElementById('date-form').submit();">
                        </form>
                    </div>

                    <!-- Scrollable Appointment List -->
                    <div class="time-list" id="appointment-list">
                        {% if appointments %}
                            {% for appt in appointments %}
                            <div class="time-item {% if selected_appointment and appt.id == selected_appointment.id %}selected{% endif %}" 
                                 data-appointment-id="{{ appt.id }}"
                                 onclick="selectAppointment({{ appt.id }})">
                                <div class="appointment-time">{{ appt.time }}</div>
                                <div class="appointment-patient">{{ appt.patient_name }}</div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-state">
                                <p>No appointments scheduled for this date.</p>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- RIGHT COLUMN -->
                <div class="info-panels" id="info-panels">
                    <!-- Appointment Information -->
                    <div class="panel" id="appointment-panel" {% if not selected_appointment %}style="display: none;"{% endif %}>
                        <h2>Appointment Details</h2>

                        <div class="info-row">
                            <label>Room</label>
                            <div class="value" id="appointment-room-id">
                                {% if selected_appointment %}{{ selected_appointment.room_id }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Date</label>
                            <div class="value" id="appointment-date">
                                {% if selected_appointment %}{{ selected_appointment.date }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Description</label>
                            <div class="value" id="appointment-description">
                                {% if selected_appointment %}{{ selected_appointment.description or '-' }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Duration</label>
                            <div class="value" id="appointment-duration">
                                {% if selected_appointment %}{{ selected_appointment.duration }} minutes{% else %}-{% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Patient Information -->
                    <div class="panel" id="patient-panel" {% if not patient %}style="display: none;"{% endif %}>
                        <h2>Patient Information</h2>

                        <div class="info-row">
                            <label>Patient ID</label>
                            <div class="value" id="patient-id">
                                {% if patient %}{{ patient.id }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>First Name</label>
                            <div class="value" id="patient-first-name">
                                {% if patient %}{{ patient.first_name }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Last Name</label>
                            <div class="value" id="patient-last-name">
                                {% if patient %}{{ patient.last_name }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Date of Birth</label>
                            <div class="value" id="patient-dob">
                                {% if patient %}{{ patient.dob }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Weight</label>
                            <div class="value" id="patient-weight">
                                {% if patient %}{{ patient.weight }} lb{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Height</label>
                            <div class="value" id="patient-height">
                                {% if patient %}{{ patient.height }} in{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Age</label>
                            <div class="value" id="patient-age">
                                {% if patient %}{{ patient.age }}{% else %}-{% endif %}
                            </div>
                        </div>

                        <div class="info-row">
                            <label>Address</label>
                            <div class="value" id="patient-address">
                                {% if patient %}{{ patient.address }}{% else %}-{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="{{ url_for('static', filename='js/doctor/appointments.js') }}"></script>
</body>
</html>